@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Legos.Models
@model Legos.Models.CheckoutFraud
@inject AurorasBricksContext dbContext

@{
    var userEmail = User.Identity?.Name;
    var customer = dbContext.Customers.FirstOrDefault(c => c.Email == userEmail);
}

<h2>Checkout Form</h2>
<form asp-action="SubmitCheckout" asp-controller="Home" method="post">
    <div class="col">
        <p>Name: @customer?.FirstName @customer?.LastName</p>
        <p>@Model.Cart?.CalculateTotal().ToString("c")</p>
    </div>

    <div class="checkout-form">
        <!-- Other form fields -->
        <div class="form-group">
@*              <label type="hidden" asp-for="customer_ID">Customer ID: </label>
 *@             <input type="hidden" asp-for="customer_ID" class="form-control" value="@customer?.CustomerId" />
        </div>
        <div class="form-group">
@*             <label asp-for="first_name">First Name</label>
            *@            <input type="hidden" asp-for="first_name" class="form-control" value="@customer?.FirstName" />
        </div>
        <div class="form-group">
@*             <label asp-for="last_name">Last Name</label>
            *@            <input type="hidden" asp-for="last_name" class="form-control" value="@customer?.LastName" />

        <div class="form-group">
@*             <label asp-for="amount">Amount</label>
                *@                <input type="hidden" asp-for="amount" class="form-control" value="@Model.Cart?.CalculateTotal().ToString("c")" />
        </div>
        <div class="form-group">
            <label asp-for="bank">Bank</label>
            <select id="bank" asp-for="bank" class="form-control" required>
                <option value="" disabled selected>Select a bank</option>
                <option value="Barclays">Barclays</option>
                <option value="RBS">RBS</option>
                <option value="Lloyds">Lloyds</option>
                <option value="Halifax">Halifax</option>
                <option value="HSBC">HSBC</option>
                <option value="Metro">Metro</option>
                <option value="Monzo">Monzo</option>
            </select>
        </div>
        <div class="form-group">
            <label asp-for="type_of_card">Card Type</label>
            <select id="type_of_card" asp-for="type_of_card" class="form-control" required>
                <option value="" disabled selected>Select a card type</option>
                <option value="Mastercard">Mastercard</option>
                <option value="Visa">Visa</option>
            </select>
        </div>
        <div class="form-group">
@*             <label asp-for="birth_date">Birth Date</label>
 *@                <input type="hidden" asp-for="birth_date" type="date" class="form-control" value="@customer?.BirthDate" />
        </div>
        <div class="form-group">
@*             <label asp-for="country_of_residence">Country of Residence</label>
 *@                <input type="hidden" asp-for="country_of_residence" class="form-control" value="@customer?.CountryOfResidence" />
        </div>
        <div class="form-group">
            <label asp-for="shipping_country">Shipping Country</label>
            <select id="shipping_country" asp-for="shipping_country" class="form-control" required>
                <option value="" disabled selected>Select a country</option>
                <option value="China">China</option>
                <option value="Russia">Russia</option>
                <option value="United Kingdom">United Kingdom</option>
                <option value="USA">USA</option>
                <option value="India">India</option>
            </select>
        </div>
        <div class="form-group">
@*             <label asp-for="gender">Gender</label>
 *@                <input type="hidden" asp-for="gender" class="form-control" value="@customer?.Gender" />
        </div>
        <div class="form-group">
@*             <label asp-for="age">Age</label>
 *@                <input type="hidden" asp-for="age" class="form-control" value="@customer?.Age" />
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
